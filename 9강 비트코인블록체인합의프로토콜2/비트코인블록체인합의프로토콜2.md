# 제9강 비트코인 블록체인 합의 프로토콜2





- ##### 블록체인 분기와 동기화

  - A1 블록상에서 다음 브록을 채굴하는 채굴자들의 해시파워가 높으면 A1 블록을 부모 블록으로 하는 B1 블록이 생성될 가능성이 높음
  - 이후 채굴자들이 B1블록을 부모 블록으로 다음 블록 채굴 활동 -> 블록체인은 500,001-A1-B1의 메인체인으로 수렴

- ##### 블록체인 동기화

  - 합의 공격(51% 공격)
    - 공격자가 자신의 이중 지불 거래가 포함된 블록을 메인 체인이 아닌 공격 대상의 정상 거래가 포함된 블록의 이전 블록에 연결하여 브랜치를 만들고, 이후  충분한 해시율로 연속적으로 블록 브랜치에 역녈하여 최종적으로 브랜치를 메인 메인으로 교체하는 공격
    - 현실적으로는 51% 이상의 해시율을 가진 공격자가 존재하기가 어렵고, 또한 공격 과정에서 블록체인 변화 과정이 추적될 수 있기 때문에 실제도 일어나기 어려우는 공격
    - 만약 51% 공격으로 비트코인의 신뢰가 훼손되어 참여자가 이탈하고 그에 따라 비트코인의 가치가 하락했을 때, 가장 치멱적인 손실을 입는 참여자는 51% 해시율을 투자한 공격자 자신이 될 것임
  - 합의 규칙 변경
    - 소프트 포크
      - 호환성을 유지하면서 이루어지는 합의 규칙 변경
    - 하드 포크
      - 기존 비트코인과의 호환서 결여를 무름쓰고 이루어지는 합의 규칙 변경
      - ex) 블록 크기 변경 - 비트코인 캐시

- ##### 비트코인의 분산 합의 정책

  - 인센티브 정책(incentive policy)
    - 최종적으로 승인된 블록을 생성한 채굴자는 블록보상과 거래 수수료를 인센티브로 지급받는다
    - 중도에 블록 승인이 취소되면 블록 인센티브도 취소된다

- ##### 비트코인 합의 알고리즘

  - 묵시적인 합의 알고리즘 채택
    - 채굴자가 최선을 다해서 합의 규칙에 따라 채굴 작업에 열중하다 보면 블록 승인의 합의에 도달하고, 블록체인이 충분히 동기화된 상태로 유지되어 이익이 되는 구조
    - 합의 규칙을 따르지 않으면 자신에게 손해가되는 구조

- ##### 비트코인 합의 문제의 어려움

  - 명시적인 합의 메커니즘 적용의 어려움
    - 익명성
    - Sybil 공격 가능성
    - P2P 네트워크의 불안정성

